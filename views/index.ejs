<!DOCTYPE html>
<html lang="en">

<head>
    <title>R-Hub</title>
    <link rel="stylesheet" href="/output.css">
    <link rel="shortcut icon" href="/logo.png" type="image/x-icon">
    <script src="https://unpkg.com/boxicons@2.1.4/dist/boxicons.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;500;600;700;800;900;1000&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');
    </style>
</head>

<body class="font-Roboto selection:bg-slate-200 flex flex-col items-center bg-[#003558]">
    <header class="w-full top-0 bg-gray-50 backdrop-blur-xl flex justify-between items-center p-2 lg:px-16 fixed transition-all duration-500 ease-in-out">
        <a class="text-xl font-bold p-2 text-black flex space-x-1 items-center" href="/">
            <div>R-Hub</div>
            <div class="text-sm font-thin rounded-lg">Beta</div>
        </a>
        <div id="menu_div" class="flex space-x-8">
            <a href="/post/new" class="hidden lg:flex font-black space-x-2 justify-center items-center p-2 px-4 text-white bg-[#003558] rounded-md border border-[#162027] hover:bg-[#02324d] transition-all duration-200 ease-in-out">
                <div>Add new post</div>
                <div class="flex fill-white"><box-icon name='folder-plus' ></box-icon></div>
            </a>
            <div class="relative">
                <img id="avatar"
                    class="hover:hue-rotate-15 transition-all duration-100 ease-in-out select-none cursor-pointer w-12 rounded-full border border-gray-700"
                    src="<%= user.picture %>" alt="">
                <div id="list"
                    class="hidden w-44 flex-col font-thin bg-[#003558] text-white bg-opacity-[0.96] backdrop-blur-lg pt-4 shadow-lg rounded-lg absolute top-full -left-24 mt-2 -z-10 p-2">
                    <a class="hover:font-normal transition-all duration-100 ease-in-out py-2 px-4" href="/">Home</a>
                    <a class="hover:font-normal transition-all duration-100 ease-in-out py-2 px-4" href="/post/new">Add new post</a>
                    <a class="hover:font-normal transition-all duration-100 ease-in-out py-2 px-4" href="/post/65bc1ecfd543eed37c1fbdb4">About Us</a>
                    <div class="py-0.5"><hr class="opacity-30"></div>
                    <a class="hover:font-normal transition-all duration-100 ease-in-out py-2 px-4" href="/logout">Logout</a>
                </div>
            </div>
        </div>
    </header>
    <main
        class="bg-gray-50 absolute top-0 -z-20 py-16 max-w-full w-full overflow-hidden text-black flex flex-col  items-center min-h-screen">
        <div class="w-full">
            <img class="w-full select-none" src="/back-04.png" alt="">
        </div>
        <div class="lg:w-[60rem] md:p-12 p-4 pr-8">
            <!-- <h1 class="text-2xl font-bold">> Hello World</h1> -->
            <div class="py-2"></div>
            <form method="post" action="/search" class="xl:scale-110 relative bg-white text-gray-500 top-0 lg:-top-24 w-full flex justify-between items-center border rounded  overflow-hidden divide-x space-x-2 lg:text-lg shadow-xl font-light">
                <input value="" name="prompt" class="bg-transparent text-gray-700 p-2 px-4 focus:outline-none w-1/2" placeholder="Type your keyword, ex: c++, c, Algorithms..." type="text">
                <select class="bg-transparent p-4 w-1/3 focus:outline-none cursor-pointer" name="project" id="project">
                    <option disabled selected value="">Project</option>
                    <option value="Libft">Libft</option>
                    <option value="ft_printf">ft_printf</option>
                    <option value="Born2beroot">Born2beroot</option>
                    <option value="get_next_line">get_next_line</option>
                    <option value="so_long">so_long</option>
                    <option value="FdF">FdF</option>
                    <option value="fract-ol">fract-ol</option>
                    <option value="push_swap">push_swap</option>
                    <option value="minitalk">minitalk</option>
                    <option value="pipex">pipex</option>
                    <option value="Philosophers">Philosophers</option>
                    <option value="minishell">minishell</option>
                    <option value="NetPractice">NetPractice</option>
                    <option value="cub3d">cub3d</option>
                    <option value="miniRT">miniRT</option>
                    <option value="CPP Module 0-4">CPP Module 0-4</option>
                    <option value="CPP Module 5-9">CPP Module 5-9</option>
                    <option value="webserv">webserv</option>
                    <option value="ft_irc">ft_irc</option>
                    <option value="Inception">Inception</option>
                    <option value="ft_transcendence">ft_transcendence</option>
                </select>
                <select class="bg-transparent p-4 w-1/3 focus:outline-none cursor-pointer" name="language" id="language">
                    <option disabled selected value="">Language</option>
                    <option value="C++">C++</option>
                    <option value="C">C</option>
                    <option value="Javascript">Javascript</option>
                    <option value="Python">Python</option>
                    <option value="Java">Java</option>
                    <option value="Ruby">Ruby</option>
                    <option value="Shell">Shell</option>
                    <option value="Makefile">Makefile</option>
                    <option value="MySQL">MySQL</option>
                    <option value="PostgreSQL">PostgreSQL</option>
                    <option value="MongoDB">MongoDB</option>
                    <option value="AWS">AWS</option>
                    <option value="Azure">Azure</option>
                    <option value="Docker">Docker</option>
                    <option value="Kubernetes">Kubernetes</option>
                    <option value="Jenkins">Jenkins</option>
                </select>
                <button type="submit" class="flex px-3 h-full py-4 hover:bg-gray-50"><box-icon name='search'></box-icon></button>
            </form>
            <div class="flex py-6 lg:py-0"></div>
            <!-- <div class="py-6"><hr></div> -->
            <div class="w-full flex justify-between py-2 bg-transparent">
                <div class="m-1 font-thin text-xl flex justify-center items-center space-x-1">
                    <div class="flex">
                        <box-icon name='world'></box-icon>
                    </div>
                    <div>
                        <% if (typeof resourse_type != 'undefined') { %>
                            <%= resourse_type %>
                        <% } %>
                    </div>
                </div>
                <!-- <select class="self-end bg-transparent cursor-pointer focus:outline-none" name="" id="">
                    <option selected disabled value="Sort by">Sorted by</option>
                    <option value="Time">Time</option>
                    <option value="Likes">Likes</option>
                </select> -->
            </div>
            <div class="flex flex-col space-y-4">
                <!-- check posts lengh -->
                <% if (posts.length == 0) { %>
                    <div class="font-thin m-auto">Nothing found</div>
                <% } %>
                <% posts.forEach(post => { %>
                    <div
                        class="w-full bg-white p-4 flex justify-between items-center space-x-3 rounded border relative pr-8 transition-all duration-200 ease-in-out">
                        <div class="w-full">
                            <a href="/post/<%= post._id %>"
                                class="text-lg font-medium hover:underline transition-all duration-150 ease-in-out">
                                <%= post.title %>
                            </a>
                            <p class="font-thin m-1">
                                <%= post.description %>
                            </p>
                            <div class="font-thin flex flex-col md:flex-row md:space-x-2 space-y-2 md:space-y-0 pt-2">
                                <% post.tags.forEach(tag => { %>
                                    <a href="/tags?value=<%= tag %>" class="w-fit p-1 px-3 rounded-full border hover:bg-blue-50 transition-all duration-150 ease-in-out">
                                        <%= tag %>
                                    </a>
                                <% }); %>
                            </div>
                        </div>
                        <div class="p-4 flex h-full justify-center flex-col space-y-2 absolute -right-12">
                            <button
                                class="flex space-x-2 justify-center items-center bg-white cursor-default rounded-lg p-1 px-3 border">
                                <box-icon name='like'></box-icon>
                                <div class="text-sm font-thin text-center">
                                    <%= post.up_users.length %>
                                </div>
                            </button>
                            <button
                                class="flex space-x-2 justify-center items-center bg-white cursor-default rounded-lg p-1 px-3 border">
                                <box-icon name='dislike'></box-icon>
                                <div class="text-sm font-thin text-center">
                                    <%= post.down_users.length %>
                                </div>
                            </button>
                        </div>
                    </div>
                    <!--  -->
                <% }); %>
            </div>
        </div>
        <div class="-top-32"></div>
    </main>
    <script src="/index_dom.js"></script>
    <script>
        window.addEventListener("scroll", () => {
            let header = document.querySelector("header");
            let menu_div = document.querySelector("#menu_div");
            if (window.scrollY > 240)
            {
                header.classList.remove("top-0");
                header.classList.add("-top-24");
                list.classList.add("hidden");
                list.classList.remove("flex");
            }
            else
            {
                header.classList.remove("-top-24");
                header.classList.add("top-0");
            }
            console.log(window.scrollY);
        });
    </script>
</body>

</html>